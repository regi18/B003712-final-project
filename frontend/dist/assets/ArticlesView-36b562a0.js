import{g as I,_ as b,h as g,o as c,c as n,d as t,t as a,m as S,j as h,e as v,i as y,k as V,p as w,b as N,l as m,A as C,w as f,n as A,F as _,r as p,v as M}from"./main-9ed44774.js";const B={name:"SummaryArticle",props:{article:{type:Object,required:!0},showSection:{type:Boolean,default:!1},sections:{type:Object,default:null}},methods:{removeMd(e){return I(e)},getSectionTitle(e){var s,l;return((l=(s=this.sections)==null?void 0:s[e.section])==null?void 0:l.title)??e.section}}};const k=e=>(w("data-v-7f53bfe8"),e=e(),N(),e),L={class:"article"},j={class:"subtitle"},D=["src"],U={class:"article-content"},F={class:"tags"},O=k(()=>t("i",{class:"fa fa-folder"},null,-1)),q=k(()=>t("i",{class:"fa fa-tag"},null,-1));function E(e,s,l,x,o,r){const u=g("router-link");return c(),n("article",L,[t("h2",null,a(l.article.title),1),t("span",j,a(l.article.subtitle),1),t("img",{src:l.article.img,onerror:"this.style.display='none'"},null,8,D),t("p",U,a(r.removeMd(l.article.content)),1),t("div",F,[l.showSection?(c(),S(u,{key:0,to:"/sections/"+l.article.section,class:"tags-item"},{default:h(()=>[O,t("span",null,a(r.getSectionTitle(l.article)),1)]),_:1},8,["to"])):v("",!0),y(u,{to:"/issues/"+l.article.issueNumber,class:"tags-item"},{default:h(()=>[q,t("span",null,"Issue No. "+a(l.article.issueNumber),1)]),_:1},8,["to"])]),y(u,{to:l.article.url,class:"button"},{default:h(()=>[V("Read More")]),_:1},8,["to"])])}const R=b(B,[["render",E],["__scopeId","data-v-7f53bfe8"]]),z={name:"ArticlesView",components:{SummaryArticle:R},created(){this.init()},methods:{async init(){if(this.items=null,this.section=this.$route.params.section,this.section&&this.section!=="all")try{let e=await m("sections/"+this.section);this.sectionTitle=e.title}catch{this.$router.push({path:"/404"})}else this.$route.name==="articles-by-issue"?(this.sectionTitle="Issue No. "+this.$route.params.issue,this.section=null,this.issueNumber=+this.$route.params.issue):(this.sectionTitle="All Articles",this.section=null,this.sections=await m("sections").then(e=>e.reduce((s,l)=>({...s,[l.slug]:l}),{})),this.issueNumbers=await m("issues"));this.load()},async load(){this.items=await C.getAll(null,this.section,this.issueNumber)},onSearch(e){console.log(this.searchText)}},computed:{isAllArticles(){return this.$route.name==="all-articles"},filteredItems(){var e;return((e=this.items)==null?void 0:e.filter(s=>s.title.toLowerCase().includes(this.searchText.toLowerCase())))??[]}},watch:{$route(e,s){this.init()}},data(){return{items:null,section:"",sectionTitle:"",sections:null,issueNumber:null,issueNumbers:[],searchText:""}}};const d=e=>(w("data-v-3856aa41"),e=e(),N(),e),G={class:"staff-articles container"},H={key:0,class:"filters"},J={class:"filter",style:{flex:"2"}},K=d(()=>t("label",{for:""},"Departments",-1)),P=d(()=>t("option",{value:null},"All",-1)),Q=["value"],W={class:"filter"},X=d(()=>t("label",{for:""},"Issue No.",-1)),Y=d(()=>t("option",{value:null},"All",-1)),Z=["value"],$={class:"search-bar"},ee={key:1},te={key:2},se={class:"first-article"},ie={class:"articles-wrapper"};function le(e,s,l,x,o,r){const u=g("SummaryArticle");return c(),n("div",G,[t("h1",null,a(o.sectionTitle),1),r.isAllArticles?(c(),n("div",H,[t("div",J,[K,f(t("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>o.section=i),onChange:s[1]||(s[1]=i=>r.load())},[P,(c(!0),n(_,null,p(o.sections,i=>(c(),n("option",{key:i.slug,value:i.slug},a(i.title),9,Q))),128))],544),[[A,o.section]])]),t("div",W,[X,f(t("select",{"onUpdate:modelValue":s[2]||(s[2]=i=>o.issueNumber=i),onChange:s[3]||(s[3]=i=>r.load())},[Y,(c(!0),n(_,null,p(o.issueNumbers,i=>(c(),n("option",{key:i,value:i},a(i),9,Z))),128))],544),[[A,o.issueNumber]])])])):v("",!0),t("div",$,[f(t("input",{type:"search","onUpdate:modelValue":s[4]||(s[4]=i=>o.searchText=i),placeholder:"Search"},null,512),[[M,o.searchText]])]),o.items?r.filteredItems.length===0?(c(),n("p",te,"No articles found.")):(c(),n(_,{key:3},[t("article",se,[y(u,{article:r.filteredItems[0],showSection:!o.section||r.isAllArticles,sections:o.sections},null,8,["article","showSection","sections"])]),t("div",ie,[(c(!0),n(_,null,p(r.filteredItems,(i,T)=>(c(),n(_,{key:i.url},[T!==0?(c(),S(u,{key:0,article:i,showSection:!o.section||r.isAllArticles,sections:o.sections},null,8,["article","showSection","sections"])):v("",!0)],64))),128))])],64)):(c(),n("p",ee,"Loading..."))])}const ce=b(z,[["render",le],["__scopeId","data-v-3856aa41"]]);export{ce as default};
