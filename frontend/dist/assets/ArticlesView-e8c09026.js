import{g as I,_ as b,h as A,o as c,c as r,d as s,t as a,m as g,j as _,e as v,i as p,k as V,p as w,b as N,l as m,A as C,w as f,n as S,F as d,r as y,v as M,f as B}from"./main-60d5ddbd.js";const L={name:"SummaryArticle",props:{article:{type:Object,required:!0},showSection:{type:Boolean,default:!1},sections:{type:Object,default:null}},methods:{removeMd(e){return I(e)},getSectionTitle(e){var t,l;return((l=(t=this.sections)==null?void 0:t[e.section])==null?void 0:l.title)??e.section}}};const k=e=>(w("data-v-7f53bfe8"),e=e(),N(),e),j={class:"article"},D={class:"subtitle"},U=["src"],F={class:"article-content"},K={class:"tags"},O=k(()=>s("i",{class:"fa fa-folder"},null,-1)),q=k(()=>s("i",{class:"fa fa-tag"},null,-1));function E(e,t,l,x,o,n){const u=A("router-link");return c(),r("article",j,[s("h2",null,a(l.article.title),1),s("span",D,a(l.article.subtitle),1),s("img",{src:l.article.img,onerror:"this.style.display='none'"},null,8,U),s("p",F,a(n.removeMd(l.article.content)),1),s("div",K,[l.showSection?(c(),g(u,{key:0,to:"/sections/"+l.article.section,class:"tags-item"},{default:_(()=>[O,s("span",null,a(n.getSectionTitle(l.article)),1)]),_:1},8,["to"])):v("",!0),p(u,{to:"/issues/"+l.article.issueNumber,class:"tags-item"},{default:_(()=>[q,s("span",null,"Issue No. "+a(l.article.issueNumber),1)]),_:1},8,["to"])]),p(u,{to:l.article.url,class:"button"},{default:_(()=>[V("Read More")]),_:1},8,["to"])])}const R=b(L,[["render",E],["__scopeId","data-v-7f53bfe8"]]),z={name:"ArticlesView",components:{SummaryArticle:R},created(){this.init()},methods:{async init(){if(this.items=null,this.section=this.$route.params.section,this.section&&this.section!=="all")try{let e=await m("sections/"+this.section);this.sectionTitle=e.title}catch{this.$router.push({path:"/404"})}else this.$route.name==="articles-by-issue"?(this.sectionTitle="Issue No. "+this.$route.params.issue,this.section=null,this.issueNumber=+this.$route.params.issue):(this.sectionTitle="All Articles",this.section=null,this.sections=await m("sections").then(e=>e.reduce((t,l)=>({...t,[l.slug]:l}),{})),this.issueNumbers=await m("issues"));this.load()},async load(){this.items=await C.getAll(null,this.section,this.issueNumber)},onSearch(e){console.log(this.searchText)}},computed:{isAllArticles(){return this.$route.name==="all-articles"},filteredItems(){var e;return((e=this.items)==null?void 0:e.filter(t=>t.title.toLowerCase().includes(this.searchText.toLowerCase())))??[]}},watch:{$route(e,t){this.init()}},data(){return{items:null,section:"",sectionTitle:"",sections:null,issueNumber:null,issueNumbers:[],searchText:""}}};const h=e=>(w("data-v-55852029"),e=e(),N(),e),G={class:"staff-articles container"},H={key:0,class:"filters"},J={class:"filter",style:{flex:"2"}},P=h(()=>s("label",{for:""},"Departments",-1)),Q=h(()=>s("option",{value:null},"All",-1)),W=["value"],X={class:"filter"},Y=h(()=>s("label",{for:""},"Issue No.",-1)),Z=h(()=>s("option",{value:null},"All",-1)),$=["value"],ee={class:"search-bar"},te={key:1},se={key:2},ie={class:"first-article"},le={class:"articles-wrapper"};function oe(e,t,l,x,o,n){const u=A("SummaryArticle");return c(),r("div",G,[s("h1",null,a(o.sectionTitle),1),n.isAllArticles?(c(),r("div",H,[s("div",J,[P,f(s("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.section=i),onChange:t[1]||(t[1]=i=>n.load())},[Q,(c(!0),r(d,null,y(o.sections,i=>(c(),r("option",{key:i.slug,value:i.slug},a(i.title),9,W))),128))],544),[[S,o.section]])]),s("div",X,[Y,f(s("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>o.issueNumber=i),onChange:t[3]||(t[3]=i=>n.load())},[Z,(c(!0),r(d,null,y(o.issueNumbers,i=>(c(),r("option",{key:i,value:i},a(i),9,$))),128))],544),[[S,o.issueNumber]])])])):v("",!0),s("div",ee,[f(s("input",{type:"search","onUpdate:modelValue":t[4]||(t[4]=i=>o.searchText=i),placeholder:"Search"},null,512),[[M,o.searchText]]),s("button",{class:"button",onClick:t[5]||(t[5]=(...i)=>n.onSearch&&n.onSearch(...i)),onKeyup:t[6]||(t[6]=B((...i)=>n.onSearch&&n.onSearch(...i),["enter"]))},"Search",32)]),o.items?n.filteredItems.length===0?(c(),r("p",se,"No articles found.")):(c(),r(d,{key:3},[s("article",ie,[p(u,{article:n.filteredItems[0],showSection:!o.section||n.isAllArticles,sections:o.sections},null,8,["article","showSection","sections"])]),s("div",le,[(c(!0),r(d,null,y(n.filteredItems,(i,T)=>(c(),r(d,{key:i.url},[T!==0?(c(),g(u,{key:0,article:i,showSection:!o.section||n.isAllArticles,sections:o.sections},null,8,["article","showSection","sections"])):v("",!0)],64))),128))])],64)):(c(),r("p",te,"Loading..."))])}const ce=b(z,[["render",oe],["__scopeId","data-v-55852029"]]);export{ce as default};
